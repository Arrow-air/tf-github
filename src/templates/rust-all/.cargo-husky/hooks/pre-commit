#!/bin/sh
#
## DO NOT EDIT!
# This file was provisioned by Terraform
##
#
# This hook was set by cargo-husky v1.5.0: https://github.com/rhysd/cargo-husky#readme

# Style templates for console output.
GREEN=$(tput setaf 2)
YELLOW=$(tput setaf 3)
BOLD=$(tput bold)
NC=$'\e[0m'

echo "${BOLD}${YELLOW}Running the pre-commit hook...${NC}${NC}\n" # should be visible in the console when doing a git commit

set -e

# RUST
echo "${YELLOW}Running cargo tests...${NC}"
cargo test --all
echo "${YELLOW}Linting Rust codes through clippy...${NC}"
cargo clippy --all -- -D warnings
echo "${YELLOW}Running and checking Rust codes formats...\n${NC}"
cargo fmt --all -- --check

# PYTHON 3
echo "${YELLOW}Formatting and checking Python files with Google style...\n${NC}"
yapf -r -i -vv . style google
echo "${YELLOW}Formatting and checking Python files with flake8 style...\n${NC}"
flake8 .


# Style Check
echo "${YELLOW}Checking if the codebase is compliant with the .editorconfig file...\n${NC}"
ec

# Finish
echo "${BOLD}${GREEN}üç∫ You are good to go!\n${NC}${NC}"
